import{L as m,X as h}from"./constants-BFeFKoYB.js";function u(){console.log("fetchLeaderboard function called");try{let t=new Date().toISOString().split("T")[0],[l,c,i]=t.split("-"),p=`${i}-${c}-${l}`;console.log("Today's date:",t);const s=`https://app.nocodb.com/api/v2/tables/${m}/records?offset=0&limit=10&where=(Date,eq,${p})&viewId=vwtanjh1wqnn2y29&sort=-Score`;console.log("API URL:",s),fetch(s,{method:"GET",headers:{"xc-token":h}}).then(e=>(console.log("Response status:",e.status),console.log("Response headers:",e.headers),e.json())).then(e=>{if(console.log("API response data:",e),!e||!e.list){console.error("Unexpected data structure:",e),document.getElementById("leaderboard-display").innerHTML="<p>Error: Unexpected data structure</p>";return}let r=e.list;if(r.length===0){console.log("No data returned from API"),document.getElementById("leaderboard-display").innerHTML='<h2 style="text-align: center; margin-top: auto; margin-bottom: auto;">Be the first to dive into the action today! Play now and claim your spot at the top of the leaderboard!</h2>';return}r.sort((o,a)=>o.TimeTaken-a.TimeTaken),r=r.slice(0,5);let d=document.getElementById("leaderboard-display");d.innerHTML="",r.forEach((o,a)=>{console.log(`Rendering row ${a+1}:`,o);let n=document.createElement("div");n.className="leaderboard-row",n.innerHTML=`
                            <div class="rank">${a+1}</div>
                            <div class="user-info">
                                <span class="user-name">${o.UserName||"Anonymous"}</span>
                                <span class="user-id">User ID: ${o.UserID}</span>
                            </div>
                            <div class="score">Time Taken - ${o.TimeTaken}s</div>
                        `,d.appendChild(n),setTimeout(()=>{n.classList.add("show")},a*100)}),console.log("Leaderboard rendering complete")}).catch(e=>{console.error("Fetch error:",e),document.getElementById("leaderboard-display").innerHTML="<p>Error loading leaderboard. Please try again later.</p>"})}catch(t){console.error("Error in fetchLeaderboard:",t)}}window.onload=u;
