import{U as l,X as r}from"./constants-BFeFKoYB.js";$(document).ready(function(){var m=function(){var g=function(e){return new Promise((n,a)=>{$.ajax({url:`https://app.nocodb.com/api/v2/tables/${l}/records?where=(Email%2Ceq%2C`+e+")",type:"GET",headers:{"xc-token":r},success:function(i){n(i.list.length>0)},error:function(i){a(i)}})})},s=function(e){var n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return n.test(e)},d=function(e){var n=/^[^\s@]+@(?!gmail\.com|yahoo\.com|hotmail\.com|outlook\.com)[^\s@]+\.[^\s@]+$/;return n.test(e)},p=function(e){var n=/^(https?:\/\/)?(www\.)?[a-zA-Z0-9-]+(\.[a-zA-Z]{2,})+([/?].*)?$/;return n.test(e)},f=function(){let e=$("#signup-email").val(),n=$("#signup-name").val(),a=$("#signup-password").val(),i=$("#signup-country").val(),t=$("#signup-social").val(),c=$("#signup-occupation").val(),k=$("#signup-company").val();if(!s(e)){alert("Please enter a valid email address.");return}if(c==="working-professional"&&!d(e)){alert("Please enter a valid company email address.");return}if(t&&!p(t)){alert("Please enter a valid URL for your social link.");return}g(e).then(o=>{o?alert("This email is already registered. Please sign in."):$.ajax({url:`https://app.nocodb.com/api/v2/tables/${l}/records`,type:"POST",headers:{"xc-token":r,"Content-Type":"application/json"},data:JSON.stringify({Name:n,Email:e,Password:a,Country:i,SocialLink:t,Profession:c,Company:k}),success:function(u){localStorage.setItem("loggedInUser",n),localStorage.setItem("loggedInUserID",u.Id),window.location.href=document.location.origin+"/index.html"},error:function(u){alert("Signup failed")}})}).catch(o=>{console.error("Error checking email:",o),alert("An error occurred. Please try again.")})},y=function(){let e=$("#signin-email").val(),n=$("#signin-password").val();if(!s(e)){alert("Please enter a valid email address.");return}console.log(e,n);try{$.ajax({url:`https://app.nocodb.com/api/v2/tables/${l}/records?offset=0&limit=1&where=(Email%2Ceq%2C`+e+")~and(Password%2Ceq%2C"+n+")",type:"GET",headers:{"xc-token":r},success:function(a){console.log(a),a.list.length>0?(localStorage.setItem("loggedInUser",a.list[0].Name),localStorage.setItem("loggedInUserID",a.list[0].Id),window.location.href=document.location.origin+"/index.html"):alert("Login failed! Please check your credentials")}})}catch{alert("Login failed! Please check your credentials")}},v=function(){$("#signup-form").submit(function(e){e.preventDefault(),f()}),$("#signin-form").submit(function(e){e.preventDefault(),y()}),$("#signup-occupation").change(function(){$(this).val()==="working-professional"?($("#signup-company-email").show(),$("#signup-email").attr("placeholder","Enter your company email")):($("#signup-company-email").hide(),$("#signup-email").attr("placeholder","Enter your email"))})},h=function(){v();const e=document.querySelector(".title-text .login"),n=document.querySelector("form.login"),a=document.querySelector("label.login"),i=document.querySelector("label.signup"),t=document.querySelector("form .signup-link a");i.onclick=()=>{n.style.marginLeft="-50%",e.style.marginLeft="-50%"},a.onclick=()=>{n.style.marginLeft="0%",e.style.marginLeft="0%"},t.onclick=()=>(i.click(),!1)};return{init:h}}();m.init()});
